(window.webpackJsonp=window.webpackJsonp||[]).push([[15,11],{810:function(e,t,n){"use strict";n.r(t);var r=n(307),o=n(297),d=n(296),l=n(795),c=n(21),m=(n(61),n(33),n(45),n(23),n(3),n(81),n(126),{computed:{getUploadingMessage:function(){return this.uploading?"Uploading ".concat(this.label," ..."):"Upload ".concat(this.label)}},props:{uploadUrl:{type:String,required:!0},label:{type:String,required:!0},memberId:{type:Number},imageName:{type:String}},data:function(){return{uploading:!1,snackbar:!1,snackBarText:"",timeout:2e3,errorMessage:"",imageUrl:""}},methods:{launchProPicFile:function(){this.$refs.fileInput.click()},setSnackbarMessage:function(e){this.snackbar=!0,this.snackBarText=e},handleFileChange:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,d,l,c,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.target.files[0]){n.next=6;break}return t.errorMessage="No file selected",t.$refs.fileInput.value="",t.setSnackbarMessage(t.errorMessage),n.abrupt("return");case 6:if(r.type.startsWith("image/")){n.next=11;break}return t.errorMessage="Selected file is not an image",t.$refs.fileInput.value="",t.setSnackbarMessage(t.errorMessage),n.abrupt("return");case 11:return t.uploading=!0,o=new FormData,d=t.memberId?"".concat(t.memberId,"-").concat(t.imageName,".").concat(r.name.split(".").pop()):"".concat(t.imageName,".").concat(r.name.split(".").pop()),l=new File([r],d,{type:r.type}),o.append("file",l),o.append("memberId",t.memberId),o.append("imageName",t.imageName),n.prev=18,n.next=21,fetch("".concat(t.uploadUrl,"/uploadImage"),{method:"POST",body:o});case 21:if((c=n.sent).ok){n.next=24;break}throw new Error("Failed to upload image");case 24:return n.next=26,c.json();case 26:m=n.sent,console.log(m),m.filename&&(t.imageUrl="".concat(t.uploadUrl,"/").concat(m.filename)),t.$refs.fileInput.value="",t.setSnackbarMessage("Image uploaded successfully"),t.uploading=!1,n.next=40;break;case 34:n.prev=34,n.t0=n.catch(18),console.error("Error uploading image:",n.t0.message),t.$refs.fileInput.value="",t.setSnackbarMessage(n.t0.message),t.uploading=!1;case 40:case"end":return n.stop()}}),n,null,[[18,34]])})))()}}}),_=n(100),component=Object(_.a)(m,(function(){var e=this,t=e._self._c;return t("div",[t(l.a,{attrs:{timeout:e.timeout},scopedSlots:e._u([{key:"actions",fn:function(){return[t(r.a,{attrs:{color:"pink",variant:"text"},on:{click:function(t){e.snackbar=!1}}},[e._v("\n      Close\n    ")])]},proxy:!0}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n  "+e._s(e.snackBarText)+"\n\n  ")]),e._v(" "),t(o.a,{attrs:{disabled:e.uploading},on:{click:e.launchProPicFile}},[t("input",{ref:"fileInput",staticStyle:{width:"0",height:"0"},attrs:{required:"",type:"file"},on:{change:e.handleFileChange}}),e._v(" "),t("h2",{staticStyle:{"text-align":"center"}},[t("p",[e._v(e._s(e.getUploadingMessage))]),e._v(" "),t(d.a,{staticStyle:{"align-self":"center"},attrs:{size:"50"}},[e._v("mdi-upload")])],1)])],1)}),[],!1,null,null,null);t.default=component.exports},883:function(e,t,n){"use strict";n.r(t);var r=n(307),o=n(297),d=n(794),l=n(226),c=n(176),m=n(795),_=n(789),f=n(776),h=n(21),v=(n(61),n(33),n(3),n(29),n(46),n(181),n(126),n(879)),y=n(312),k=n.n(y),I={computed:{getImageUrl:function(){return"".concat(this.editedItem.server_url,"/uploads/Logo/").concat(this.editedItem.image_url)}},components:{ImageUpload:n(810).default},watch:{$route:function(){firebase.database().ref("Settings").off("value")}},mounted:function(){var e=localStorage.getItem("token");localStorage.getItem("serverURL");if(e){var t=k.a.decode(e);t?(this.currentUser=t,"Admin"==t.role?this.userHasPermission=!0:this.userHasPermission=!1,this.userHasPermission?this.fetchSiteSettings():this.$router.push("/")):(console.log("Invalid JWT token."),this.$store.dispatch("auth/logout"))}else console.log("JWT token not found."),this.$store.dispatch("auth/logout")},methods:{handleSnackbarEvent:function(e){this.setSnackbarMessage(e.snackBarText)},fetchSiteSettings:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,fetch("http://localhost:3006/fetchSiteSettings",{method:"GET",headers:{"Content-Type":"application/json"}});case 4:if((n=t.sent).ok){t.next=7;break}throw new Error("HTTP error! Status: ".concat(n.status));case 7:return t.next=9,n.json();case 9:data=t.sent,console.log(data.settings),null!=data.settings&&(e.editedItem=data.settings,console.log(e.editedItem)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),console.error("Error fetching members:",t.t0),e.setSnackbarMessage(t.t0);case 18:e.loading=!1;case 19:case"end":return t.stop()}}),t,null,[[1,14]])})))()},checkDate:function(e,t){return("start"==t&&null!=e||"stop"==t&&null!=e)&&this.formatDate(e).toString()==this.formatDate(Date.now()).toString()},formatDate:function(e){return Object(v.a)(new Date(e),"MMM dd, yyyy")},deleteProPic:function(){var e=this;this.proPicisDeleting=!0,firebase.storage().refFromURL(this.editedItem.image_url).delete().then((function(){e.editedItem.image_url="",e.proPicProgress=null,e.proPicisDeleting=!1})).catch((function(t){e.proPicisDeleting=!1,console.error("Error deleting image",t)}))},launchProPicFile:function(){this.$refs.proPicFile.click()},uploadProPicFile:function(e){var t=this;return Object(h.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.length){n.next=2;break}return n.abrupt("return");case 2:if((r=e[0]).type.match("image.*")){n.next=6;break}return alert("Please upload an image."),n.abrupt("return");case 6:return{contentType:r.type},t.proPicisUploading=!0,t.proPicUploadStarted=!0,(o=new FormData).append("image",r),n.next=13,fetch("http://localhost:3006/upload",{method:"POST",body:o}).then((function(e){return e.json()})).then((function(data){t.editedItem.image_url=data.imageUrl})).catch((function(e){return console.error("Error uploading image:",e)}));case 13:t.proPicisUploading=!1;case 14:case"end":return n.stop()}}),n)})))()},pauseProPicUpload:function(){null!=this.proPicUploadTask&&(this.proPicUploadTask.pause(),this.proPicpaused=!0,this.proPiccancelled=!1,this.proPicresumed=!1)},resumeProPicUpload:function(){null!=this.proPicUploadTask&&(this.proPicUploadTask.resume(),this.proPiccancelled=!1,this.proPicresumed=!0,this.proPicpaused=!1)},cancelProPicUpload:function(){null!=this.proPicUploadTask&&(this.proPicUploadTask.cancel(),this.proPiccancelled=!0,this.proPicpaused=!1,this.proPicisUploading=!1,this.proPicuploadStarted=!1,this.proPicresumed=!0)},setSnackbarMessage:function(e){this.snackbar=!0,this.snackBarText=e},save:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.saving=!0,e.editedItem.updated_at="NOW()",e.editedItem.drawstarted=!1,console.log("".concat(e.editedItem.server_url,"/updateSiteSettings")),t.prev=4,t.next=7,fetch("".concat(e.editedItem.server_url,"/updateSiteSettings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:1,updatedData:e.editedItem})});case 7:if((n=t.sent).ok){t.next=10;break}throw new Error("HTTP error! Status: ".concat(n.status));case 10:return t.next=12,n.json();case 12:data=t.sent,e.setSnackbarMessage(data.message),e.saving=!1,t.next=22;break;case 17:t.prev=17,t.t0=t.catch(4),e.saving=!1,console.error("Error updating settings:",t.t0),e.setSnackbarMessage(t.t0);case 22:case"end":return t.stop()}}),t,null,[[4,17]])})))()},startDraw:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.starping=!0,t.prev=1,t.next=4,fetch("".concat(e.editedItem.server_url,"/startDraw"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({drawStarted:!e.editedItem.drawStarted})});case 4:if((n=t.sent).ok){t.next=7;break}throw new Error("HTTP error! Status: ".concat(n.status));case 7:return t.next=9,n.json();case 9:data=t.sent,e.editedItem.drawStarted=!0,e.setSnackbarMessage(data.message),e.starping=!1,t.next=20;break;case 15:t.prev=15,t.t0=t.catch(1),e.starping=!1,console.error("Error starting draw:",t.t0),e.setSnackbarMessage(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,15]])})))()},startSimulation:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.depositing=!0,t.prev=1,t.next=4,fetch("".concat(e.editedItem.server_url,"/calculate-days"),{method:"GET",headers:{"Content-Type":"application/json"}});case 4:if((n=t.sent).ok){t.next=7;break}throw new Error("HTTP error! Status: ".concat(n.status));case 7:return t.next=9,n.json();case 9:data=t.sent,e.setSnackbarMessage(data.message),e.depositing=!1,t.next=19;break;case 14:t.prev=14,t.t0=t.catch(1),e.depositing=!1,console.error("Error starting draw:",t.t0),e.setSnackbarMessage(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,14]])})))()}},data:function(){return{userHasPermission:!1,snackBarText:"",timeout:2e3,snackbar:!1,saving:!1,starping:!1,depositing:!1,lottoNumbersgenerated:!1,lottoNumbersgenerating:!1,proPicImageType:null,proPicProgress:null,proPicpaused:!1,proPicresumed:!0,proPiccancelled:!1,proPicisUploading:!1,proPicisDeleting:!1,isProPicDeleting:!1,proPicUploadStarted:!1,proPicUploadTask:null,userIsAdmin:!1,dropzoneOptions:{url:"https://httpbin.org/post",thumbnailWidth:250,thumbnailHeight:250,addremoveLinks:!1,acceptedFiles:".jpeg, .png, .jpg"},images:[],picture:null,loading:!0,uploadValue:0,settings:[],editedItem:{maxmimum_members:1e5,systemStartedAt:null,drawStarted:!1,drawEndedAt:null,drawStartedAt:null,site_name:"Derash",batch_amount:10,memeber_spin_timeout:10,draw_timeout:30,service_fee:50,deposit_contribution_before:50,min_deposit_days:15,max_deposit_days:30,penality_fee:80,max_days_to_wait:15,max_days_to_penalize:30,deposit_contribution_after:550,daily_number_of_winners:5,daily_win_amount:1e6,copy_right_content:"",server_url:"",about_us:"",image_url:"",updated_at:null,updated_by:1}}}},w=n(100),component=Object(w.a)(I,(function(){var e=this,t=e._self._c;return t(o.a,{staticClass:"px-10 py-3"},[t(m.a,{attrs:{timeout:e.timeout},scopedSlots:e._u([{key:"actions",fn:function(){return[t(r.a,{attrs:{color:"pink",variant:"text"},on:{click:function(t){e.snackbar=!1}}},[e._v("\n        Close\n      ")])]},proxy:!0}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.snackBarText)+"\n\n    ")]),e._v(" "),t(d.a,[t(f.a,{ref:"site_name",attrs:{"prepend-icon":"mdi-rename-box",outlined:"",dense:"",disabled:1==e.loading,required:"",hint:"Enter the name of the company",label:"Site Name"},model:{value:e.editedItem.site_name,callback:function(t){e.$set(e.editedItem,"site_name",t)},expression:"editedItem.site_name"}}),e._v(" "),t(f.a,{ref:"batch_amount",attrs:{"prepend-icon":"mdi-pot",outlined:"",dense:"",disabled:1==e.loading,required:"",type:"number",label:"Enter the number of batch",hint:"Simultaneous number of batch to start with"},model:{value:e.editedItem.batch_amount,callback:function(t){e.$set(e.editedItem,"batch_amount",t)},expression:"editedItem.batch_amount"}}),e._v(" "),t(f.a,{ref:"memeber_spin_timeout",attrs:{"prepend-icon":"mdi-timer-sand",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the maximum amount of seconds given for a member to spin",label:"Member Spin Timeout"},model:{value:e.editedItem.memeber_spin_timeout,callback:function(t){e.$set(e.editedItem,"memeber_spin_timeout",t)},expression:"editedItem.memeber_spin_timeout"}}),e._v(" "),t(f.a,{ref:"draw_timeout",attrs:{"prepend-icon":"mdi-timer-sand",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the maximum amount of minuted to wait for the draw to end processing",label:"Draw Timeout"},model:{value:e.editedItem.draw_timeout,callback:function(t){e.$set(e.editedItem,"draw_timeout",t)},expression:"editedItem.draw_timeout"}}),e._v(" "),t(f.a,{ref:"deposit_contribution_before",attrs:{"prepend-icon":"mdi-cash",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the amount of money a single member will contribue BEFORE winning",label:"Pre - Daily Contribution"},model:{value:e.editedItem.deposit_contribution_before,callback:function(t){e.$set(e.editedItem,"deposit_contribution_before",t)},expression:"editedItem.deposit_contribution_before"}}),e._v(" "),t(f.a,{ref:"service_fee",attrs:{"prepend-icon":"mdi-cash",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the amount of money paid as a service fee",label:"Service Fee"},model:{value:e.editedItem.service_fee,callback:function(t){e.$set(e.editedItem,"service_fee",t)},expression:"editedItem.service_fee"}}),e._v(" "),t(f.a,{ref:"min_deposit_days",attrs:{"prepend-icon":"mdi-view-day",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the minimum number of deposit days to process",label:"Minimum deposit days"},model:{value:e.editedItem.min_deposit_days,callback:function(t){e.$set(e.editedItem,"min_deposit_days",t)},expression:"editedItem.min_deposit_days"}}),e._v(" "),t(f.a,{ref:"deposit_contribution_after",attrs:{"prepend-icon":"mdi-cash-100",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the amount of money a single member will contribue AFTER winning",label:"Post - Daily Contribution"},model:{value:e.editedItem.deposit_contribution_after,callback:function(t){e.$set(e.editedItem,"deposit_contribution_after",t)},expression:"editedItem.deposit_contribution_after"}}),e._v(" "),t(f.a,{ref:"max_deposit_days",attrs:{"prepend-icon":"mdi-view-day",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the maximum number of deposit days to process",label:"Maximum deposit days"},model:{value:e.editedItem.max_deposit_days,callback:function(t){e.$set(e.editedItem,"max_deposit_days",t)},expression:"editedItem.max_deposit_days"}}),e._v(" "),t(f.a,{ref:"daily_number_of_winners",attrs:{"prepend-icon":"mdi-account-multiple",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the amount of members that will win in a single day",label:"Daily number of winners"},model:{value:e.editedItem.daily_number_of_winners,callback:function(t){e.$set(e.editedItem,"daily_number_of_winners",t)},expression:"editedItem.daily_number_of_winners"}}),e._v(" "),t(f.a,{ref:"daily_win_amount",attrs:{"prepend-icon":"mdi-cash-multiple",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the amount of money a single member will win",label:"Daily winning amount"},model:{value:e.editedItem.daily_win_amount,callback:function(t){e.$set(e.editedItem,"daily_win_amount",t)},expression:"editedItem.daily_win_amount"}}),e._v(" "),t(f.a,{ref:"max_days_to_wait",attrs:{"prepend-icon":"mdi-calendar-blank",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the maximum number of days to wait for a member to deposit before disallowing any further deposits",label:"Maximum days to wait"},model:{value:e.editedItem.max_days_to_wait,callback:function(t){e.$set(e.editedItem,"max_days_to_wait",t)},expression:"editedItem.max_days_to_wait"}}),e._v(" "),t(f.a,{ref:"max_days_to_penalize",attrs:{"prepend-icon":"mdi-calendar-today",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the maximum number of days to wait for a member that has won to be penalized",label:"Maximum days to penalize"},model:{value:e.editedItem.max_days_to_penalize,callback:function(t){e.$set(e.editedItem,"max_days_to_penalize",t)},expression:"editedItem.max_days_to_penalize"}}),e._v(" "),t(f.a,{ref:"penality_fee",attrs:{"prepend-icon":"mdi-cash-multiple",outlined:"",dense:"",disabled:1==e.loading,type:"number",required:"",hint:"Enter the amount of money a member that has won will be penalized",label:"Amount of penality money"},model:{value:e.editedItem.penality_fee,callback:function(t){e.$set(e.editedItem,"penality_fee",t)},expression:"editedItem.penality_fee"}}),e._v(" "),t(f.a,{ref:"copy_right_content",attrs:{"prepend-icon":"mdi-copyright",outlined:"",dense:"",disabled:1==e.loading,required:"",label:"Copy right content"},model:{value:e.editedItem.copy_right_content,callback:function(t){e.$set(e.editedItem,"copy_right_content",t)},expression:"editedItem.copy_right_content"}}),e._v(" "),t(f.a,{ref:"server_url",attrs:{"prepend-icon":"mdi-web",outlined:"",dense:"",disabled:1==e.loading,required:"",label:"Server URL"},model:{value:e.editedItem.server_url,callback:function(t){e.$set(e.editedItem,"server_url",t)},expression:"editedItem.server_url"}}),e._v(" "),t(f.a,{ref:"maxmimum_members",attrs:{"prepend-icon":"mdi-number",outlined:"",dense:"",type:"number",disabled:1==e.loading,required:"",label:"Maxmimu Members Per Batch"},model:{value:e.editedItem.maxmimum_members,callback:function(t){e.$set(e.editedItem,"maxmimum_members",t)},expression:"editedItem.maxmimum_members"}}),e._v(" "),t(f.a,{ref:"about_us",attrs:{"prepend-icon":"mdi-number",outlined:"",dense:"",disabled:1==e.loading,required:"",label:"About Us"},model:{value:e.editedItem.about_us,callback:function(t){e.$set(e.editedItem,"about_us",t)},expression:"editedItem.about_us"}}),e._v(" "),e.editedItem.image_url?t(o.a,{attrs:{outlined:""}},[t(l.a,{attrs:{width:"20%",height:"30%",src:e.getImageUrl}})],1):e._e(),e._v(" "),t(o.a,{attrs:{disabled:e.loading}},[t("ImageUpload",{attrs:{label:"Logo",uploadUrl:e.editedItem.server_url,imageName:"Logo"}})],1)],1),e._v(" "),t("div",{staticClass:"mt-5"},[e.saving?e._e():t(r.a,{staticClass:"gradient",staticStyle:{"background-color":"#183D0E",color:"#FFC72C"},attrs:{disabled:1==e.loading||e.editedItem.drawStarted,block:"","min-height":"44"},on:{click:e.save}},[e._v("\n                Save\n              ")]),e._v(" "),e.saving||e.starping?t(c.a,{staticStyle:{width:"100%",margin:"auto",color:"#183D0E"},attrs:{align:"center",indeterminate:""}}):e._e(),e._v(" "),t(_.a),e._v(" "),e.editedItem.drawStarted||e.starping?e.editedItem.drawStarted&&!e.starping?t(r.a,{staticClass:"mt-5 gradient",staticStyle:{"background-color":"#183D0E",color:"#FFC72C"},attrs:{disabled:e.depositing,block:"","min-height":"44"},on:{click:e.startDraw}},[e._v("\n                Emergency Stop\n              ")]):e._e():t(r.a,{staticClass:"mt-5 gradient",staticStyle:{"background-color":"#183D0E",color:"#FFC72C"},attrs:{disabled:e.depositing,block:"","min-height":"44"},on:{click:e.startDraw}},[e._v("\n                Start Draw\n              ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{ImageUpload:n(810).default})}}]);