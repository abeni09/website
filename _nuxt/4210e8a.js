(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{810:function(e,t,n){"use strict";n.r(t);var r=n(307),c=n(297),o=n(296),l=n(795),d=n(21),m=(n(61),n(33),n(45),n(23),n(3),n(81),n(126),{computed:{getUploadingMessage:function(){return this.uploading?"Uploading ".concat(this.label," ..."):"Upload ".concat(this.label)}},props:{uploadUrl:{type:String,required:!0},label:{type:String,required:!0},memberId:{type:Number},imageName:{type:String}},data:function(){return{uploading:!1,snackbar:!1,snackBarText:"",timeout:2e3,errorMessage:"",imageUrl:""}},methods:{launchProPicFile:function(){this.$refs.fileInput.click()},setSnackbarMessage:function(e){this.snackbar=!0,this.snackBarText=e},handleFileChange:function(e){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var r,c,o,l,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.target.files[0]){n.next=6;break}return t.errorMessage="No file selected",t.$refs.fileInput.value="",t.setSnackbarMessage(t.errorMessage),n.abrupt("return");case 6:if(r.type.startsWith("image/")){n.next=11;break}return t.errorMessage="Selected file is not an image",t.$refs.fileInput.value="",t.setSnackbarMessage(t.errorMessage),n.abrupt("return");case 11:return t.uploading=!0,c=new FormData,o=t.memberId?"".concat(t.memberId,"-").concat(t.imageName,".").concat(r.name.split(".").pop()):"".concat(t.imageName,".").concat(r.name.split(".").pop()),l=new File([r],o,{type:r.type}),c.append("file",l),c.append("memberId",t.memberId),c.append("imageName",t.imageName),n.prev=18,n.next=21,fetch("".concat(t.uploadUrl,"/uploadImage"),{method:"POST",body:c});case 21:if((d=n.sent).ok){n.next=24;break}throw new Error("Failed to upload image");case 24:return n.next=26,d.json();case 26:m=n.sent,console.log(m),m.filename&&(t.imageUrl="".concat(t.uploadUrl,"/").concat(m.filename)),t.$refs.fileInput.value="",t.setSnackbarMessage("Image uploaded successfully"),t.uploading=!1,n.next=40;break;case 34:n.prev=34,n.t0=n.catch(18),console.error("Error uploading image:",n.t0.message),t.$refs.fileInput.value="",t.setSnackbarMessage(n.t0.message),t.uploading=!1;case 40:case"end":return n.stop()}}),n,null,[[18,34]])})))()}}}),f=n(100),component=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("div",[t(l.a,{attrs:{timeout:e.timeout},scopedSlots:e._u([{key:"actions",fn:function(){return[t(r.a,{attrs:{color:"pink",variant:"text"},on:{click:function(t){e.snackbar=!1}}},[e._v("\n      Close\n    ")])]},proxy:!0}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n  "+e._s(e.snackBarText)+"\n\n  ")]),e._v(" "),t(c.a,{attrs:{disabled:e.uploading},on:{click:e.launchProPicFile}},[t("input",{ref:"fileInput",staticStyle:{width:"0",height:"0"},attrs:{required:"",type:"file"},on:{change:e.handleFileChange}}),e._v(" "),t("h2",{staticStyle:{"text-align":"center"}},[t("p",[e._v(e._s(e.getUploadingMessage))]),e._v(" "),t(o.a,{staticStyle:{"align-self":"center"},attrs:{size:"50"}},[e._v("mdi-upload")])],1)])],1)}),[],!1,null,null,null);t.default=component.exports}}]);