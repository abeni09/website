(window.webpackJsonp=window.webpackJsonp||[]).push([[13,8,9],{821:function(t,e,n){var content=n(838);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(19).default)("8e24a2a8",content,!0,{sourceMap:!1})},837:function(t,e,n){"use strict";n(821)},838:function(t,e,n){var o=n(18)((function(i){return i[1]}));o.push([t.i,".equal-card[data-v-500cd2cc]{width:200px}",""]),o.locals={},t.exports=o},847:function(t,e,n){var content=n(874);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(19).default)("273909a2",content,!0,{sourceMap:!1})},849:function(t,e,n){"use strict";n.r(e);var o=n(297),r=n(793),l=n(296),c=n(792),d=n(789),m={props:{title:{required:!0,default:"title"},dcolor:{required:!0,default:"grey"},countItems:{required:!0,default:0},iconStyle:{required:!0,default:"mdi-account"}}},h=(n(837),n(100)),component=Object(h.a)(m,(function(){var t=this,e=t._self._c;return e(o.a,{staticClass:"equal-card pa-5",staticStyle:{color:"rgb(251, 197, 43)"},attrs:{flat:"",color:t.dcolor}},[e(c.a,[e(d.a),t._v(" "),e(c.a,{attrs:{align:"center"}},[e(r.a,{attrs:{align:"center",cols:"12"}},[e(l.a,{attrs:{size:"60",color:"white"}},[t._v(" "+t._s(t.iconStyle)+" ")])],1)],1),t._v(" "),e(c.a,{attrs:{align:"center"}},[e(r.a,{staticStyle:{"list-style":"none","font-weight":"bolder","font-size":"30px"},attrs:{cols:"12"}},[t._v("\n      "+t._s(t.countItems)+"\n    ")]),t._v(" "),e(r.a,{attrs:{cols:"12"}},[t._v(t._s(t.title))])],1),t._v(" "),e(d.a)],1)],1)}),[],!1,null,"500cd2cc",null);e.default=component.exports},850:function(t,e,n){"use strict";n.r(e);var o=n(297),r=n(793),l=n(296),c=n(792),d={props:{title:{required:!0,default:"title"},dcolor:{required:!0,default:"grey"},countItems:{required:!0,default:0},percentage:{required:!0,default:0},iconStyle:{default:"mdi-account"}}},m=n(100),component=Object(m.a)(d,(function(){var t=this,e=t._self._c;return e(o.a,{staticClass:"ma-1 lighten-1 white--text",attrs:{flat:"",color:t.dcolor,width:"210","min-height":"90"}},[e(c.a,[e(r.a,{staticClass:"align-center",attrs:{cols:"12"}},[e(c.a,[e(r.a,{attrs:{align:"center",cols:"12"}},[e(l.a,{attrs:{size:"30"}},[t._v(" "+t._s(t.iconStyle)+" ")])],1),t._v(" "),e(r.a,{attrs:{align:"center",cols:"12"}},[t._v(t._s(t.title))])],1)],1),t._v(" "),e(r.a,{staticStyle:{"list-style":"none","font-weight":"bolder","font-size":"25px"},attrs:{cols:"12",color:t.dcolor}},[t._v("\n      "+t._s(t.countItems)+"\n    ")]),t._v(" "),e(r.a,{staticStyle:{"list-style":"none","font-weight":"bolder","font-size":"25px"},attrs:{cols:"12",color:t.dcolor}},[t._v("\n      "+t._s(t.percentage+"%")+"\n    ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports},873:function(t,e,n){"use strict";n(847)},874:function(t,e,n){var o=n(18)((function(i){return i[1]}));o.push([t.i,'.card[data-v-33e3ecd7]{visibility:inherit;--blue:#2a2185;--white:#fff;--gray:#f5f5f5;--black1:#222;--black2:#999;background:#fff;background:var(--white);border-radius:20px;box-shadow:0 7px 25px rgba(0,0,0,.08);box-sizing:border-box;cursor:pointer;display:flex;font-family:"Ubuntu",sans-serif;justify-content:space-between;margin:0;padding:30px;position:relative}.cardName[data-v-33e3ecd7]{box-sizing:border-box;font-size:1.1rem;margin:5px 0 0}.cardName[data-v-33e3ecd7],.hydrated[data-v-33e3ecd7]{visibility:inherit;--blue:#2a2185;--white:#fff;--gray:#f5f5f5;--black1:#222;--black2:#999;color:#999;color:var(--black2);cursor:pointer;font-family:"Ubuntu",sans-serif;padding:0}.hydrated[data-v-33e3ecd7]{contain:strict;display:inline-block;font-size:3.5rem;height:1em;width:1em;fill:currentcolor;box-sizing:content-box!important;margin:0}.iconBx[data-v-33e3ecd7]{color:#999;color:var(--black2);font-size:3.5rem}.iconBx[data-v-33e3ecd7],.numbers[data-v-33e3ecd7]{visibility:inherit;--blue:#2a2185;--white:#fff;--gray:#f5f5f5;--black1:#222;--black2:#999;box-sizing:border-box;cursor:pointer;font-family:"Ubuntu",sans-serif;margin:0;padding:0}.numbers[data-v-33e3ecd7]{color:#2a2185;color:var(--blue);font-size:2.5rem;font-weight:500;position:relative}.card-main[data-v-33e3ecd7]{-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent;--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;box-sizing:border-box;color:#353c4e;display:flex;flex-direction:column;font-family:open sans,sans-serif;font-size:.875em;font-weight:400;line-height:1.5;min-width:0;position:relative;text-align:left;word-wrap:break-word;background-clip:border-box;background-color:#fff;border:none;border-radius:5px;box-shadow:0 1px 20px 0 rgba(69,90,100,.08);margin-bottom:30px}',""]),o.locals={},t.exports=o},886:function(t,e,n){"use strict";n.r(e);var o=n(307),r=n(297),l=n(304),c=n(793),d=n(799),m=n(868),h=n(296),f=n(293),v=n(176),y=n(792),w=n(809),M=n(789),x=n(21),_=(n(61),n(33),n(9),n(73),n(45),n(3),n(29),n(63),n(11),n(849)),S=n(850),k=n(879),D=n(836),I=n(312),C=n.n(I),P={computed:{dashboardCards:function(){return[{dcolor:"rgb(23, 59, 13)",title:"Pots",icon:"mdi-pot",countItems:this.numberOfPots},{dcolor:"rgb(23, 59, 13)",title:"Members",icon:"mdi-account",countItems:this.totalMembers}]},dashboardPotCards:function(){return[{title:"How many people can the money an individual, that has already been lucky, contributes a day reach (paid) to?",icon:"mdi-pot",countItems:this.q0},{title:"How many people can the money all individual(s), that has already been lucky, contribute a day reach (paid) to?",icon:"mdi-pot",countItems:this.q1},{title:"How many people can the money an individual, that is yet to be lucky, contributes a day reach (paid) to?",icon:"mdi-pot",countItems:(this.siteSettings.dcb/this.stillToWinMembers.length/this.siteSettings.dwa).toExponential(3)},{title:"How many people can the money all individual(s), that is yet to be lucky, contribute a day reach (paid) to?",icon:"mdi-pot",countItems:(parseInt(this.siteSettings.dcb)*this.stillToWinMembers.length/this.stillToWinMembers.length/parseInt(this.siteSettings.dwa)).toExponential(3)},{title:"How many people can the money all individual(s) contribute a day reach (paid) to?",icon:"mdi-pot",countItems:((parseInt(this.siteSettings.dcb)*this.stillToWinMembers.length+parseInt(this.siteSettings.dca)*this.winnerMembers.length)/this.stillToWinMembers.length/parseInt(this.siteSettings.dwa)).toExponential(3)},{title:"How many days left to finish?",icon:"mdi-account",countItems:this.stillToWinMembers.length/parseInt(this.siteSettings.dnw).toExponential(3)},{title:"How much money left to finish?",icon:"mdi-account",countItems:(this.stillToWinMembers.length*parseInt(this.siteSettings.dwa)).toExponential(3)},{title:"How much money collected so far from contribution?",icon:"mdi-account",countItems:this.totalDepositPerPot},{title:"How much money payed so far for those who got lucky?",icon:"mdi-account",countItems:this.winnerMembers.length*parseInt(this.siteSettings.dwa)}]},specificMemberCards:function(){var t=this;return[{won:!1,title:"How many days left until this individual gets lucky?",icon:"mdi-pot",countItems:((parseInt(this.siteSettings.dwa)-this.selectedMemberBeforeDeposit)/this.siteSettings.dcb).toExponential(3)},{won:!1,title:"How much money this individual must pay to get lucky?",icon:"mdi-pot",countItems:(parseInt(this.siteSettings.dwa)-this.selectedMemberBeforeDeposit).toExponential(3)},{won:!0,title:"How many days has this individual been contributing before getting lucky?",icon:"mdi-pot",countItems:(this.selectedMemberBeforeDeposit/this.siteSettings.dcb).toExponential(3)},{won:!0,title:"How much money has this individual contributed before getting lucky?",icon:"mdi-pot",countItems:this.selectedMemberBeforeDeposit},{won:!0,title:"How many days has this individual left to finish contributing after getting lucky?",icon:"mdi-pot",countItems:((parseInt(this.siteSettings.dwa)-this.selectedMemberTotalDeposit)/this.siteSettings.dca).toExponential(3)},{won:!0,title:"How much money is this individual left to finish contributing after getting lucky?",icon:"mdi-account",countItems:parseInt(this.siteSettings.dwa)-this.selectedMemberTotalDeposit}].filter((function(e){return e.won==t.selectedMember.won}))}},watch:{pot:"fetchDataForSelectedPot",member:"fetchDataForSelectedMember"},components:{DashCard:_.default,DashCardForReport:S.default},name:"IndexPage",data:function(){return{q0:0,q1:0,q2:0,q3:0,q4:0,q5:0,q6:0,q7:0,q8:0,totalMembers:0,totalPots:0,days:0,potDataLoading:!1,pot:null,member:null,company:null,duration:"Daily",today:null,status:null,winStatus:null,specificReportResponse:null,potOptions:[],memberOptions:[],selectedMember:null,selectedMemberDeposit:[],selectedMemberTotalDeposit:null,selectedMemberBeforeDeposit:null,selectedMemberAfterDeposit:null,originalMemberOptions:[],winnerMembers:[],stillToWinMembers:[],deposits:[],filteredDeposits:[],totalDepositPerPot:0,numberOfPots:0,siteSettings:null,lottoSettings:[],durationOptions:["Daily","Weekly","Monthly"],database:firebase.database(),generating:!1,viewGeneratedReport:!1,currentUser:null,userHasPermission:!1,loading:!0}},mounted:function(){var t=this,e=localStorage.getItem("token");if(e){var n=C.a.decode(e);n?(this.currentUser=n,"Admin"==n.role?this.userHasPermission=!0:this.userHasPermission=!1,this.checkUserHasPermission):(console.log("Invalid JWT token."),this.$store.dispatch("auth/logout"))}else console.log("JWT token not found."),this.$store.dispatch("auth/logout");this.userHasPermission,firebase.auth().onAuthStateChanged(function(){var e=Object(x.a)(regeneratorRuntime.mark((function e(n){var o,r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.currentUser=n,o=firebase.database(),t.currentUser&&(r=t.currentUser.email,l=r.replace("@","").replace(".",""),c="Users/"+l,o.ref(c).on("value",(function(e){var n=e.val().role;t.userRole=n,t.userHasPermission="Admin"==n})),t.userHasPermission||o.ref("Members").orderByChild("pot").on("value",(function(e){t.totalMember=0,t.originalMemberOptions=[],e.forEach((function(element){o.ref("Members").child(element.key).child("Deposit").once("value",(function(e){e.exists()&&e.forEach((function(e){var n={pot:element.val().pot,amount:e.val().amount};t.deposits.push(n)}))})),t.originalMemberOptions.push(element.val()),t.totalMembers=t.totalMembers+1})),console.log("Member fetched")}))),t.fetchSiteSettings(),t.fetchLottoSettings();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},methods:{fetchMembers:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,fetch("http://localhost:3006/fetchMembers",{method:"GET",headers:{"Content-Type":"application/json"}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("HTTP error! Status: ".concat(n.status));case 7:return e.next=9,n.json();case 9:data=e.sent,t.originalMemberOptions=data.members,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Error fetching members:",e.t0),t.setSnackbarMessage(e.t0);case 17:t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[1,13]])})))()},fetchDeposits:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,fetch("http://localhost:3006/fetchDeposits",{method:"GET",headers:{"Content-Type":"application/json"}});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("HTTP error! Status: ".concat(n.status));case 7:return e.next=9,n.json();case 9:data=e.sent,t.deposits=data.deposits,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Error fetching Deposits:",e.t0),t.setSnackbarMessage(e.t0);case 17:t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[1,13]])})))()},fetchDataForSelectedMember:function(){var t=this;0!=this.originalMemberOptions.length&&(this.selectedMember=this.originalMemberOptions.filter((function(e){return e.id==t.member&&e.pot==t.pot}))[0],console.log(this.selectedMember),null!=this.selectedMember&&(this.winStatus=this.selectedMember.won,firebase.database().ref("Members").child(this.selectedMember.id).child("Deposit").once("value",(function(e){e.exists()&&e.forEach((function(e){var n={status:e.val().status,amount:e.val().amount};t.selectedMemberDeposit.push(n)}))})),0!=this.selectedMemberDeposit.length&&this.selectedMemberDeposit.forEach((function(element){t.selectedMemberTotalDeposit=t.selectedMemberTotalDeposit+parseInt(element.amount),"Before"==element.status&&(t.selectedMemberBeforeDeposit=t.selectedMemberBeforeDeposit+parseInt(element.amount)),"After"==element.status&&(t.selectedMemberAfterDeposit=t.selectedMemberAfterDeposit+parseInt(element.amount))}))))},fetchDataForSelectedPot:function(){var t=this;this.potDataLoading=!0,this.memberOptions=[],this.member=null,this.filteredDeposits=[],this.totalDepositPerPot=0,this.winnerMembers=[],this.stillToWinMembers=[],0!=this.originalMemberOptions.length&&(this.memberOptions=this.originalMemberOptions.filter((function(e){return e.pot===t.pot})).map((function(t){return{text:"".concat(t.name," (").concat(t.age,")"),value:t.id}})),this.filteredDeposits=this.deposits.filter((function(e){return e.pot===t.pot})),this.filteredDeposits.forEach((function(element){t.totalDepositPerPot=t.totalDepositPerPot+parseInt(element.amount)})),this.winnerMembers=this.originalMemberOptions.filter((function(e){return e.pot===t.pot&&1==e.won})),this.stillToWinMembers=this.originalMemberOptions.filter((function(e){return e.pot===t.pot&&1!=e.won})),console.log(this.siteSettings.dca/this.stillToWinMembers.length),this.q0=(this.siteSettings.dca/(this.stillToWinMembers.length*this.siteSettings.dwa)).toExponential(3),this.q1=(parseInt(this.siteSettings.dca)*this.winnerMembers.length/this.stillToWinMembers.length*parseInt(this.siteSettings.dwa)).toExponential(3)),this.potDataLoading=!1},getStatusColor:function(t){return t},closeReportViewer:function(){this.viewGeneratedReport=!1,this.specificReportResponse=null,this.userHasPermission&&(this.pot=null),this.selectedMember=null,this.member=null,this.generating=!1,this.days=0,this.today=null,this.status=null},exportToExcel:function(t){var data=t.map((function(t){return{"Phone Number":"+251".concat(t.PhoneNumber),Member:t.MemberName,Company:t.company,Pot:t.pot,Date:t.date,Status:t.status.toUpperCase()}})),e=D.a.json_to_sheet(data),n=D.a.book_new();D.a.book_append_sheet(n,e,"Member"),Object(D.b)(n,"Member.xlsx")},generateReport:function(){this.generating=!0,this.generating=!1,this.viewGeneratedReport=!0},calculateDaysBefore:function(t){var e=new Date,n=new Date(e);n.setDate(e.getDate()-t);var o=n.getTime();return this.formatDate(o)},formatDate:function(t){return Object(k.a)(new Date(t),"MMMddyyyy")},fetchSiteSettings:function(){var t=this;this.siteSettings=[],this.database.ref("Settings/SiteSetting").once("value",(function(e){e.exists()&&(t.siteSettings=e.val(),t.numberOfPots=parseInt(t.siteSettings.pot)),t.fetchPots(),console.log("Site Settings fetched")}))},fetchLottoSettings:function(){var t=this;this.lottoSettings=[],this.database.ref("Settings/LottoSetting").once("value",(function(e){e.forEach((function(element){var e=element.val();e.pot=element.key,t.lottoSettings.push(e)})),console.log("Lotto Settings fetched"),console.log(t.lottoSettings)}))},fetchPots:function(){if(0!=this.numberOfPots)for(var i=1;i<this.numberOfPots+1;i++){var element="Pot ".concat(i);this.potOptions.push(element)}}}},O=P,T=(n(873),n(100)),component=Object(T.a)(O,(function(){var t=this,e=t._self._c;return e(d.a,[null!=t.selectedMember?e(m.a,{attrs:{"max-width":"100%",persistent:""},model:{value:t.viewGeneratedReport,callback:function(e){t.viewGeneratedReport=e},expression:"viewGeneratedReport"}},[e(r.a,[e(y.a,{staticClass:"ma-1",staticStyle:{"background-color":"aliceblue","margin-bottom":"1%"}},[e(l.d,{staticClass:"headline centered-title"},[t._v("\n          Report for "+t._s(t.member)+" ("+t._s(t.pot)+")\n        ")])],1),t._v(" "),e(l.c,[e(y.a,{attrs:{align:"center"}},t._l(t.specificMemberCards,(function(n,o){return e(c.a,{key:o,attrs:{align:"center",cols:"12",md:"4",sm:"6"}},[e("div",{staticClass:"card"},[e("div",[e("div",{staticClass:"numbers"},[t._v(t._s(n.countItems))]),t._v(" "),e("div",{staticClass:"cardName"},[t._v(t._s(n.title))])])])])})),1)],1),t._v(" "),e(l.a,[e(M.a),t._v(" "),e(o.a,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeReportViewer}},[t._v("Close")])],1)],1)],1):t._e(),t._v(" "),t.currentUser?e(y.a,{staticClass:"ma-1"},[t.loading?e(f.a,[e(v.a,{attrs:{indeterminate:"",color:"primary"}})],1):t._e()],1):t._e(),t._v(" "),e(y.a,{staticClass:"ma-1"},[e(c.a,{attrs:{align:"center",cols:"12",md:"4",sm:"6"}},[e(w.a,{attrs:{outlined:"",clearable:"",dense:"",label:"Pots",items:t.potOptions},model:{value:t.pot,callback:function(e){t.pot=e},expression:"pot"}})],1),t._v(" "),e(M.a),t._v(" "),e(c.a,{attrs:{align:"center",cols:"12",md:"4",sm:"6"}},[e(w.a,{attrs:{disabled:null==t.pot,outlined:"",clearable:"",dense:"",label:"Members",items:t.memberOptions},model:{value:t.member,callback:function(e){t.member=e},expression:"member"}})],1),t._v(" "),e(M.a),t._v(" "),e(c.a,{attrs:{align:"center",cols:"12",md:"4",sm:"12"}},[t.generating||t.loading?t.generating?e(v.a,{attrs:{indeterminate:"",color:"success",size:"50"}}):t._e():e(o.a,{attrs:{disabled:null==t.member,width:"100%",color:"primary"},on:{click:t.generateReport}},[t._v("View Report")])],1)],1),t._v(" "),e(y.a,{staticClass:"ma-5",attrs:{align:"center"}},t._l(t.dashboardCards,(function(n,o){return e(c.a,{key:o,staticClass:"mt-1",attrs:{align:"center",cols:"12",md:"6",sm:"6"}},[e("div",{staticClass:"card-main"},[e("div",{staticClass:"card-block text-center"},[e(h.a,{staticClass:"feather icon-mail text-c-lite-green d-block f-40",attrs:{size:"50",color:"rgb(23, 59, 13)"}},[t._v(t._s(n.icon))]),t._v(" "),e("h3",{staticClass:"mt-5"},[e("span",{staticStyle:{color:"rgb(251, 197, 43)",size:"30px"}},[t._v(t._s(n.countItems))]),t._v("\n        "+t._s(n.title))])],1)])])})),1),t._v(" "),null==t.pot?e(y.a,{staticClass:"ma-10",attrs:{align:"center"}},[e(c.a,{attrs:{align:"center"}},[e("v-text",{staticClass:"headline"},[t._v("NO POT SELECTED")])],1)],1):null!=t.pot?e(y.a,{attrs:{align:"center"}},[t.potDataLoading?e(c.a,{attrs:{align:"center"}},[e(v.a,{attrs:{indeterminate:"",color:"success",size:"50"}})],1):t._e(),t._v(" "),t._l(t.dashboardPotCards,(function(n,o){return t.potDataLoading?t._e():e(c.a,{key:o,attrs:{align:"center",cols:"12",md:"4",sm:"6"}},[e("div",{staticClass:"card"},[e("div",[e("div",{staticClass:"numbers"},[t._v(t._s(n.countItems))]),t._v(" "),e("div",{staticClass:"cardName"},[t._v(t._s(n.title))])])])])}))],2):t._e()],1)}),[],!1,null,"33e3ecd7",null);e.default=component.exports}}]);